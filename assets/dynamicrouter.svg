<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="840" height="528" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title: Dynamic Router and Nested Matcher

participant DynamicRouter
participant RouteProvider
participant RouteFilter

DynamicRouter->RouteProvider: Match by path
RouteProvider-->DynamicRouter: RouteCollection
DynamicRouter->RouteFilter: Reduce matches
RouteFilter-->DynamicRouter: RouteCollection
DynamicRouter->FinalMatcher: Match
note over FinalMatcher: This is UrlMatcher
FinalMatcher-->DynamicRouter: attributes
DynamicRouter->RouteEnhancer: Enhance
RouteEnhancer-->DynamicRouter: attributes
]]></source><desc>Created with RaphaÃ«l 2.1.0</desc><defs></defs><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="29" width="340" y="10" x="10"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="330" y="15" x="15"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="24.5" x="180" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">Dynamic Router and Nested Matcher</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="49" x="10"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="59" x="20"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="68.5" x="85" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">DynamicRouter</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="469" x="10"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="479" x="20"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="488.5" x="85" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">DynamicRouter</tspan></text><path stroke-width="2" d="M85,88L85,469" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="49" x="180"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="59" x="190"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="68.5" x="255" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteProvider</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="469" x="180"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="479" x="190"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="488.5" x="255" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteProvider</tspan></text><path stroke-width="2" d="M255,88L255,469" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="130" y="49" x="350"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="110" y="59" x="360"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="68.5" x="415" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteFilter</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="130" y="469" x="350"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="110" y="479" x="360"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="488.5" x="415" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteFilter</tspan></text><path stroke-width="2" d="M415,88L415,469" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="140" y="49" x="500"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="120" y="59" x="510"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="68.5" x="570" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">FinalMatcher</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="140" y="469" x="500"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="120" y="479" x="510"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="488.5" x="570" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">FinalMatcher</tspan></text><path stroke-width="2" d="M570,88L570,469" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="49" x="660"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="59" x="670"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="68.5" x="735" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteEnhancer</tspan></text><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="39" width="150" y="469" x="660"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="479" x="670"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="488.5" x="735" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteEnhancer</tspan></text><path stroke-width="2" d="M735,88L735,469" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="130" y="103.5" x="105"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="113" x="170" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">Match by path</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M85,127C85,127,221.9241428375244,127,250.0042893178761,127" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="150" y="142.5" x="95"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="152" x="170" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteCollection</tspan></text><path stroke-dasharray="6,2" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M255,166C255,166,118.07585716247559,166,89.9957106821239,166" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="140" y="181.5" x="180"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="191" x="250" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">Reduce matches</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M85,205C85,205,368.65445509552956,205,409.9976459383106,205" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="150" y="220.5" x="175"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="230" x="250" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">RouteCollection</tspan></text><path stroke-dasharray="6,2" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M415,244C415,244,131.34554490447044,244,90.0023540616894,244" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="50" y="259.5" x="302.5"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="269" x="327.5" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">Match</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M85,283C85,283,513.7151983380318,283,565.0019286079623,283" stroke="#000000" fill="none" style=""></path><rect stroke-width="2" style="" stroke="#000000" fill="none" ry="0" rx="0" r="0" height="29" width="190" y="303" x="500"></rect><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="180" y="308" x="505"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="317.5" x="595" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">This is UrlMatcher</tspan></text><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="100" y="347.5" x="277.5"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="357" x="327.5" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">attributes</tspan></text><path stroke-dasharray="6,2" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M570,371C570,371,141.28480166196823,371,89.99807139203767,371" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="70" y="386.5" x="375"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="396" x="410" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">Enhance</tspan></text><path stroke-dasharray="0" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M85,410C85,410,669.7571045160294,410,730.003075733257,410" stroke="#000000" fill="none" style=""></path><rect style="" stroke="none" fill="#ffffff" ry="0" rx="0" r="0" height="19" width="100" y="425.5" x="360"></rect><text font-family="Andale Mono, monospace" font-size="16px" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" text-anchor="middle" y="435" x="410" style="text-anchor: middle; font: 16px Andale Mono,monospace;"><tspan dy="5.5">attributes</tspan></text><path stroke-dasharray="6,2" marker-end="url(#raphael-marker-endblock55)" stroke-width="2" d="M735,449C735,449,150.24289548397064,449,89.99692426674301,449" stroke="#000000" fill="none" style=""></path></svg>